---
title: "Open Government Data, OpenDataZurich"
date: "2025-10-12"
output: html_document
---

## Dataset: Klimadaten

Geodaten zum städtischen Klima

**Zweck**: Grundlagedaten für weitere Untersuchungen und Analysen

**Genereller Hinweis zum Geodatensatz:**

Es handelt sich hierbei um einen Geodatensatz, welcher aus mehreren Geodatenelmenten besteht. Diese Geodatenelemente werden hier nicht im Detail beschrieben. Sie finden jedoch sämtliche Informationen - wie beispielsweise die Attributbeschreibungen - [«**Klimadaten»** auf Geocat.ch](https://www.geocat.ch/geonetwork/srv/ger/catalog.search#/metadata/e3c0d3e2-0900-4a72-9ac6-8e64a9e02a5e).
			   

**Informationen zum Datensatz:**

Datenelemente werden nur im Datenformat ESRI SDE GDB beschrieben. 
Zusätzliches Datenformat mit identischem Inhalt: Oracle SDO im Schema UGZ_SDO. 

**Datengrundlage:**

Amtliche Vermessungsdaten der Stadt Zürich.

**Geodatenelemente:**

Die vollständige Metadatenbeschreibung der Geodatenelemente finden Sie ebenfalls unter [«**Klimadaten»** auf Geocat.ch](https://www.geocat.ch/geonetwork/srv/ger/md.viewer#/full_view/e3c0d3e2-0900-4a72-9ac6-8e64a9e02a5e).

***25_Kaltluftproduktionsrate Kanton Zürich***: 

Rate der mittleren nächtlichen Kaltluftproduktion pro Rasterzelle (Kaltluftvolumen), gegliedert in 4 Intensitätsstufen. Inputdaten für Modellierung Kaltlufttransport.



***27_Lokaler Kaltluftstau Kanton Zürich***: 

Darstellung der Gebiete, bei denen auf Grund der Topographie oder der Siedlungstruktur (Siedlungsrand als Strömungshindernis) die nächtlichen Kaltluftströme gestaut bzw. stark verlangsamt werden (vertikale Austauschprozesse durch Luftschichtug unterdrückt) . 



***44_Jahresmittel der NO2-Konzentration Stadt Zürich***: 

Räumliche Verteilung der Stickstoffdioxidbelastung (Jahresmittel). REKLISO-Modell (kalibriert mit Immissionsdaten UGZ).



***32_Lokaler Kaltlufttransport Stadt Zürich ***: 

Klassifizierung des lokalen Kaltlufttransports über der Rasterzelle, bzw. des mit der benachbarten Rasterzelle pro Zeiteinheit ausgetauschen Kaltuftvolumens in m3 pro m und sec (Volumenstromdichte).



***01_Landbedeckung Kanton Zürich***: 

Primäre Landbedeckungstypen mit Bedeutung für die lokalen Klimabedingungen (Gewässer; Wald; Vegetationsbestandene Freiflächen; vegetationslose, mehrheitlich versiegelte Freiflächen; bebaute Flächen) 



***Zielsetzung Lufthygiene***: 

Durchlüftung
aktuelle Wirkräume - ungünstige Emissionssituation verbessern
potentielle Wirkräume - günstige Emissionssituation erhalten
aktuelle Ausgleichsräume 
potentielle Ausgleichsräume 



***Durchlüftung***: 

Priorisierung der Räume in denen auf Grund der lokalklimatischen Situation eine Erhaltung und/oder Verbesserung der thermischen und/oder Durchlüftungsituation angezeigt ist.



***03_Arealtypen Kanton Zürich***: 

Aus den unterschiedlichen Flächenanteilen der Landbedeckungstypenen generierte, für die Rasterzelle &quot;charakteristische&quot; Landnutzung. Differenzierung nach Bebauungs- bzw. Vegetationsdichte.



***23_Lokale Wärmebelastung Kanton Zürich***: 

Intensitätklassen der lokalen Wärmebelastung. Klassifizierung (Schwellenwert, dT) ist so gewählt, dass räumliche Differenzierung planerisch verwertbar wird (Grundlage für Massnahmenableitung)



***31_Lokaler Kaltlufttransport Kanton Zürich ***: 

Klassifizierung des lokalen Kaltlufttransports über der Rasterzelle, bzw. des mit der benachbarten Rasterzelle pro Zeiteinheit ausgetauschen Kaltuftvolumens in m3 pro m und sec (Volumenstromdichte).



***Massnahmengebiet 1***: 

Gebiete mitnächtlich hoher Wärme- und Schadstoffbelastung sowie ungünstiger Durchlüftungssituation, in denen durch bauliche Verdichtung entstehende Defizite mit kompensatorischen Massnahmen bestmöglich ausgeglichen werden sollen.



***Zielsetzung thermische Situation***: 

Durchlüftung
aktuelle Wirkräume - ungünstige thermische Situation verbessern
potentielle Wirkräume - günstige thermische Situation erhalten
Ausgleichsräume



***KLIMA_AQ_DR_10M_2008_STZH.tif***: 




***26_Kaltluftproduktionsrate Stadt Zürich***: 

Rate der mittleren nächtlichen Kaltluftproduktion pro Rasterzelle (Kaltluftvolumen), gegliedert in 4 Intensitätsstufen. Inputdaten für Modellierung Kaltlufttransport.



***22_Lokale Überwärmung Stadt Zürich***: 

Abweichung der mittleren nächtlichen Lufttemperatur in Bodennähe vom Mittelwert für das Gesamtgebiet (Gebietsmittel) in Kelvin



***24_Lokale Wärmebelastung Stadt Zürich***: 

Intensitätklassen der lokalen Wärmebelastung. Klassifizierung (Schwellenwert, dT) ist so gewählt, dass räumliche Differenzierung planerisch verwertbar wird (Grundlage für Massnahmenableitung)



***34_Mesoskalige Windverhältnisse Stadt Zürich***: 

Darstellung des übergeordneten (mesoskaligen) Windsystems bei autochthonen Wetterlagen (insb. orographisch bedingte Berg-Talwind-Systeme).



***KLIMA_AQ_SR_50M_2008_KTZH.tif***: 




***33_Mesoskalige Windverhältnisse Kanton Zürich***: 

Klassifizierung des Anteils des übergeordneten (mesoskaligen) Windsystems bei autochthonen Wetterlagen (insb. orographisch bedingte Berg-Talwind-Systeme).



***29_Lokaler Oberflächeneinfluss Kanton Zürich ***: 

Art des Einfluss der Oberfläche auf den Luftstrom: mechanisch &gt; Rauhigkeit der Oberfläche &gt; Übreströumng; thermisch &gt; Wärmefluss von der Oberfläche bzw. verzögerte Abgabe der über den Tag aufgenommenen Wärme.



***43_Jahresmittel der NO2-Konzentration Kanton Zürich***: 

Räumliche Verteilung der Stickstoffdioxidbelastung (Jahresmittel). REKLISO-Modell (kalibriert mit Immissionsdaten UGZ).



***28_Lokaler Kaltluftstau Stadt Zürich***: 

Darstellung der Gebiete, bei denen auf Grund der Topographie oder der Siedlungstruktur (Strömungshindernis) die nächtlichen Kaltluftströme gestaut bzw. stark verlangsamt werden (vertikale Austauschprozesse durch Luftschichtug unterdrückt) . 



***Massnahmengebiet 3***: 

In der Nacht nur gering durch Überwärmung und Luftschadstoffe belastete Gebiete in denen die Grünräume erhalten und der Luftaustausch mit dem Umland gesichert werden soll.



***21_Lokale Überwärmung Kanton Zürich***: 

Abweichung der mittleren nächtlichen Lufttemperatur in Bodennähe vom Mittelwert für das Gesamtgebiet (Gebietsmittel) in Kelvin



***Massnahmengebiet 2***: 

In der Nacht mässig durch Überwärmung und Luftschadstoffe belastete Gebiete mit eher ungünstiger Durchlüftungssituation in denen die Verdichtung begrenzt sowie  Grünanteil und Luftleitbahnen erhalten werden sollen.



***04_Arealtypen Stadt Zürich***: 

Aus den unterschiedlichen Flächenanteilen der Landbedeckungstypenen generierte, für die Rasterzelle &quot;charakteristische&quot; Landnutzung. Differenzierung nach Bebauungs. Bzw. und Vegetationsdichte.



***02_Landbedeckung Stadt Zürich***: 

Primäre Landbedeckungstypen mit Bedeutung für die lokalen Klimabedingungen (Gewässer; Wald; Vegetationsbestandene Freiflächen; vegetationslose, mehrheitlich versiegelte Freiflächen; bebaute Flächen) 



***30_Lokaler Oberflächeneinfluss Stadt Zürich ***: 

Art des Einfluss der Oberfläche auf den Luftstrom: mechanisch &gt; Rauhigkeit der Oberfläche &gt; Übreströumng; thermisch &gt; Wärmefluss von der Oberfläche bzw. verzögerte Abgabe der über den Tag aufgenommenen Wärme.





**Statisches Vorschaubild:**

![BildText](https://www.gis.stadt-zuerich.ch/zueriplan_docs/geocat/e3c0d3e2-0900-4a72-9ac6-8e64a9e02a5e.png)



[Direct link by **OpenDataZurich** for dataset](https://data.stadt-zuerich.ch/dataset/geo_klimadaten)

Auto generated R starter code for data set geo_klimadaten.

## Metadata

- **Publisher** `Lärmschutz, Umwelt- und Gesundheitsschutz, Gesundheits- und Umweltdepartement`
- **Maintainer** `Open Data Zürich`
- **Maintainer_email** `opendata@zuerich.ch`
- **Keywords** `Umwelt`
- **Tags** `['geodaten', 'geoportal', 'klima', 'polygondaten', 'rasterdaten', 'stzh', 'umwelt', 'vektordaten']`
- **Metadata_created** `2023-11-06T03:14:47.453637`
- **Metadata_modified** `2025-10-11T06:35:18.420581`


# Load packages

```{r}
library(httr2)
library(sf)
library(skimr)
library(tidyverse)
library(xml2)
```

# Load the data

data link
```{r}
url <- "https://www.stadt-zuerich.ch/geodaten/download/Klimadaten?format=geojson_link"
```


Helper function to create the url based on the geoportal, as the files are not directly available via fixed link like csvs.
```{r}
get_geoportal_url <- function(url) {
  dataset_identifier <- sub(".*/(.*)\\?.*", "\\1", url)
  paste0("https://www.ogd.stadt-zuerich.ch/wfs/geoportal/", dataset_identifier)
}
```

```{r}
# Helper function to get available layers from WFS
get_wfs_layers <- function(url) {
  
  url_geoportal <- get_geoportal_url(url)
  
  cat("Getting available layers from:", url_geoportal, "\n")
  
  # read xml from geoportal
  resp <- request(url_geoportal) |> 
    req_headers(service = "WFS", version = "1.1.0", request = "GetCapabilities") |> 
    req_perform()
  
  content_as_xml <- resp_body_xml(resp)
  
  # find available layers: find "Name" nodes with parent "Layer"
  name_nodes <- content_as_xml |> xml_ns_strip() |> xml_find_all("//Name")
  
  # keep all nodes that have Name and it's parent's name is "Layer"
  # and directly extract the name to get a list of typenames
  typename_nodes <- purrr::keep(name_nodes,
                                \(x) xml_name(xml_parent(x)) == "Layer")
  
  return(typename_nodes)
}

# Fetch available layers
layers <- get_wfs_layers(url)

# Set first layer as default
typename <- xml_text(layers[[1]])
cat("Chosen typename:", typename, "\n")
```

read the data
```{r}
read_geodata <- function(url, typename) {
  url_geoportal <- get_geoportal_url(url)
  
  request <- request(url_geoportal) |>
    req_url_query(
      service = "WFS",
      version = "1.1.0",
      outputFormat = "GeoJSON",
      request = "GetFeature",
      typename = typename
    )
  
  st_read(request$url)
}

df <- read_geodata(url, typename)
```

if the approach above does not work, try using [ows4r](https://eblondel.github.io/ows4R/); however, this needs to be installed first
```{r eval=FALSE}
# install.packages("ows4R")
library(ows4R)

# WFS-Client erstellen
url_geoportal <- get_geoportal_url(url)
wfs_client <- WFSClient$new(url_geoportal, "1.1.0")

# Verfügbare Feature-Typen anzeigen
wfs_client$getFeatureTypes(pretty = TRUE)

typenames <- wfs_client$getFeatureTypes(pretty = TRUE) |> 
  dplyr::pull(name)

df <- read_geodata(url, typenames[[1]])
```

# Analyze the data

look at the data
```{r}
head(df)
```

```{r}
glimpse(df)
```

```{r}
# look at distributions etc. without looking at geographical data (skim cannot deal with geometries)
skim(st_drop_geometry(df))
```

# Plot data

base R plot
```{r}
plot(df$geometry)
```

ggplot2 plot
```{r}
df |>
  ggplot() +
  geom_sf()
```

# Continue your code here...

```{r}

```

------------------------------------------------------------------------

# Contact

opendata@zuerich.ch
