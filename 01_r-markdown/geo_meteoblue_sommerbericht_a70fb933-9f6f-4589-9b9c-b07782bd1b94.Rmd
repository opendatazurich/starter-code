---
title: "Open Government Data, OpenDataZurich"
date: "2025-06-29"
output: html_document
---

## Dataset: meteoblue Sommerbericht

Mit dem fortschreitenden Klimawandel sind die Städte der Hitze stärker ausgesetzt als ihr Umland, wodurch Hitzewellen in Zukunft länger, intensiver und häufiger auftreten. Daten aus dem meteorologischen Stadtklima-Messnetz von meteoblue (seit 2019) und Satellitendaten werden verwendet, um mit Hilfe künstlicher Intelligenz und dem meteoblue-Stadtklimamodell (MCCM) hochaufgelöste Lufttemperaturfelder (10x10m) zu berechnen. Aus diesen können zusätzlich verschiedene klimatologische Kennzahlen sowie der städtische Wärmeinseleffekt berechnet und damit die Hitze- beziehungsweise Kältebelastung in der Stadt Zürich quantifiziert werden. Die Daten beziehen sich jeweils auf die Sommermonate Juni, Juli, August.

**Zweck**: Beurteilung der stadtklimatologischen Situation in Zürich

**Genereller Hinweis zum Geodatensatz:**

Es handelt sich hierbei um einen Geodatensatz, welcher aus mehreren Geodatenelmenten besteht. Diese Geodatenelemente werden hier nicht im Detail beschrieben. Sie finden jedoch sämtliche Informationen - wie beispielsweise die Attributbeschreibungen - [«**meteoblue Sommerbericht»** auf Geocat.ch](https://www.geocat.ch/geonetwork/srv/ger/catalog.search#/metadata/02500a6a-7836-4db2-9519-2234975ba5eb).
			   

**Datenerfassung:**

Die Erstellung der Geodaten erfolgte durch die Firma meteoblue in Zusammenarbeit mit dem UGZ - Messung Luftqualität.

**Geodatenelemente:**

Die vollständige Metadatenbeschreibung der Geodatenelemente finden Sie ebenfalls unter [«**meteoblue Sommerbericht»** auf Geocat.ch](https://www.geocat.ch/geonetwork/srv/ger/md.viewer#/full_view/02500a6a-7836-4db2-9519-2234975ba5eb).

***ugz_lufqualitaet_uhi_nacht_sommer_2022.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Nacht (22:00 - 06:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_nacht_sommer_2024.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Nacht (22:00 - 06:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_tag_sommer_2020.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Tag (10:00 - 18:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_luftqualitaet_hitzetage_sommer_2020.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Hitzetage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur mindestens 30 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_sommertage_sommer_2020.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Sommertage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur über 25 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_sommertage_sommer_2021.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Sommertage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur über 25 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_sommertage_sommer_2023.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Sommertage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur über 25 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_tropennaechte_sommer_2021.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Tropennächte auf einer Höhe von 3 m in der Stadt Zürich (minimale Lufttemperatur nicht unter 20 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_tropennaechte_sommer_2023.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Tropennächte auf einer Höhe von 3 m in der Stadt Zürich (minimale Lufttemperatur nicht unter 20 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_uhi_mittel_sommer_2020.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt (Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_mittel_sommer_2022.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt (Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_mittel_sommer_2023.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt (Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_nacht_sommer_2020.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Nacht (22:00 - 06:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_tag_sommer_2022.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Tag (10:00 - 18:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_sommertage_sommer_2022.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Sommertage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur über 25 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_sommertage_sommer_2024.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Sommertage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur über 25 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_tropennaechte_sommer_2024.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Tropennächte auf einer Höhe von 3 m in der Stadt Zürich (minimale Lufttemperatur nicht unter 20 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_uhi_mittel_sommer_2021.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt (Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_nacht_sommer_2021.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Nacht (22:00 - 06:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_nacht_sommer_2023.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Nacht (22:00 - 06:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_tag_sommer_2023.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Tag (10:00 - 18:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_luftqualitaet_hitzetage_sommer_2021.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Hitzetage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur mindestens 30 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_uhi_tag_sommer_2024.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Tag (10:00 - 18:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_LCZ.tif***: 

Dieser Layer gibt Auskunft über die lokalen Klimazonen der Stadt Zürich.
Lokale Klimazonen:
- 1 (Kompakte, hohe Bebauung)
- 2 (Kompakte, mittelhohe Bebauung)
- 3 (Kompakte, niedrige Bebauung)
- 4 (Offene, hohe Bebauung)
- 5 (Offene, mittelhohe Bebauung)
- 6 (Offene, niedrige Bebauung)
- 7 (Leichte, niedrige Bebauung)
- 8 (Grosse, niedrige Bebauung)
- 9 (Spärliche Bebauung)
- 10 (Schwerindustrie)
- A (Dichte Bäume)
- B (Vereinzelte Bäume)
- C (Büsche, Sträucher)
- D (Niedrige Bepflanzung)
- E (Blanker Fels, Versiegelung)
- F (Blanker Boden, Sand)
- G (Wasser)
- E (Blanker Fels, Versiegelung)
- F (Blanker Boden, Sand)
- G (Wasser)


***ugz_lufqualitaet_tropennaechte_sommer_2022.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Tropennächte auf einer Höhe von 3 m in der Stadt Zürich (minimale Lufttemperatur nicht unter 20 °C, Sommermonate Juni, Juli, August).


***ugz_lufqualitaet_uhi_mittel_sommer_2024.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt (Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_lufqualitaet_uhi_tag_sommer_2021.tif***: 

Modellierter Wert, &quot;Urban Heat Island&quot;, urbane Wärmeinseleffekt Tag (10:00 - 18:00, Sommermonate Juni, Juli, August) in °C für die Stadt Zürich


***ugz_luftqualitaet_hitzetage_sommer_2022.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Hitzetage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur mindestens 30 °C, Sommermonate Juni, Juli, August).


***MESSNETZ_METEOBLUE***: 

Der Datensatz gibt Auskunft über die stadtklimatologische Situation in Zürich über die Sommermonate Juni, Juli und August, welche von 90 verschiedenen, über die Stadt Zürich verteilten Messstationen gemessen wurden. Gemessen werden die Parameter Lufttemperatur, Niederschlag und relative Luftfeuchte. Aus den Temperaturmessungen werden Minimal-, Maximal- und Mitteltemperaturen und verschiedene klimatologische Kenntage ermittelt (Hitzetage, Sommertage, Tropennächte und Kühlgradtage). Aus den Niederschlagswerten werden (mittlere) Niederschlagssummen und -stunden, maximale Niederschlagssummen und die maximale Anzahl zusammenhängender Nass- und Trockentage bestimmt. Durch die Messung der relativen Luftfeuchte werden stationsbasierte Analysen der mittleren relativen Luftfeuchte und die Anzahl der Zeitpunkte mit einer relativen Luftfeuchte von 100 % ermittelt. Ausserdem gibt der Datensatz Auskunft über die Koordinaten der einzelnen Messstationen. Die beschriebenen Informationen sind als Vektordaten vorhanden. Zusätzlich gibt es verschiedene Rasterdaten:  Anzahl Hitzetage (maximale Lufttemperatur mindestens 30 °C), Sommertage (maximale Lufttemperatur über 25 °C), Tropennächte (minimale Lufttemperatur nicht unter 20 °C), Kühlgradtage (Summe der täglich ermittelten Differenz zwischen einer angestrebten Raumlufttemperatur von 18.3 °C und der mittleren Tagestemperatur aller Kühltage.).


***ugz_luftqualitaet_hitzetage_sommer_2023.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Hitzetage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur mindestens 30 °C, Sommermonate Juni, Juli, August).


***ugz_luftqualitaet_hitzetage_sommer_2024.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Hitzetage auf einer Höhe von 3 m in der Stadt Zürich (maximale Lufttemperatur mindestens 30 °C, Sommermonate Juni, Juli, August).


***ugz_luftqualitaet_kuehlgradtage_sommer_2020.tif***: 

Diese Layer geben Auskunft über die Kühlgradtage auf einer Höhe von 3 m in der Stadt Zürich (Summe der täglich ermittelten Differenz zwischen einer angestrebten
Raumlufttemperatur von 18.3 °C und der mittleren Tagestemperatur aller Kühltage, Sommermonate Juni, Juli, August). 


***ugz_luftqualitaet_kuehlgradtage_sommer_2021.tif***: 

Diese Layer geben Auskunft über die Kühlgradtage auf einer Höhe von 3 m in der Stadt Zürich (Summe der täglich ermittelten Differenz zwischen einer angestrebten
Raumlufttemperatur von 18.3 °C und der mittleren Tagestemperatur aller Kühltage, Sommermonate Juni, Juli, August). 


***ugz_luftqualitaet_kuehlgradtage_sommer_2022.tif***: 

Diese Layer geben Auskunft über die Kühlgradtage auf einer Höhe von 3 m in der Stadt Zürich (Summe der täglich ermittelten Differenz zwischen einer angestrebten
Raumlufttemperatur von 18.3 °C und der mittleren Tagestemperatur aller Kühltage, Sommermonate Juni, Juli, August). 


***ugz_luftqualitaet_kuehlgradtage_sommer_2023.tif***: 

Diese Layer geben Auskunft über die Kühlgradtage auf einer Höhe von 3 m in der Stadt Zürich (Summe der täglich ermittelten Differenz zwischen einer angestrebten
Raumlufttemperatur von 18.3 °C und der mittleren Tagestemperatur aller Kühltage, Sommermonate Juni, Juli, August). 


***ugz_luftqualitaet_kuehlgradtage_sommer_2024.tif***: 

Diese Layer geben Auskunft über die Kühlgradtage auf einer Höhe von 3 m in der Stadt Zürich (Summe der täglich ermittelten Differenz zwischen einer angestrebten
Raumlufttemperatur von 18.3 °C und der mittleren Tagestemperatur aller Kühltage, Sommermonate Juni, Juli, August). 


***ugz_lufqualitaet_tropennaechte_sommer_2020.tif***: 

Dieser Layer gibt Auskunft über die Anzahl Tropennächte auf einer Höhe von 3 m in der Stadt Zürich (minimale Lufttemperatur nicht unter 20 °C, Sommermonate Juni, Juli, August).




**Statisches Vorschaubild:**

![BildText](https://www.gis.stadt-zuerich.ch/zueriplan_docs/geocat/02500a6a-7836-4db2-9519-2234975ba5eb.png)



[Direct link by **OpenDataZurich** for dataset](https://data.stadt-zuerich.ch/dataset/geo_meteoblue_sommerbericht)

Auto generated R starter code for data set geo_meteoblue_sommerbericht.

## Metadata

- **Publisher** `Messung Luftqualität, Umwelt- und Gesundheitsschutz, Gesundheits- und Umweltdepartement`
- **Maintainer** `Open Data Zürich`
- **Maintainer_email** `opendata@zuerich.ch`
- **Keywords** `Umwelt`
- **Tags** `['geodaten', 'geoportal', 'hitze', 'hitzetage', 'klimaanderung', 'kuhlgradtage', 'luftfeuchtigkeit', 'niederschlag', 'punktdaten', 'rasterdaten', 'sommertage', 'stadtklima', 'stzh', 'temperatur', 'tropennachte']`
- **Metadata_created** `2023-11-06T03:19:30.312098`
- **Metadata_modified** `2025-06-28T06:37:20.483153`


# Load packages

```{r}
library(httr2)
library(sf)
library(skimr)
library(tidyverse)
library(xml2)
```

# Load the data

data link
```{r}
url <- "https://www.stadt-zuerich.ch/geodaten/download/meteoblue_Sommerbericht?format=geojson_link"
```


Helper function to create the url based on the geoportal, as the files are not directly available via fixed link like csvs.
```{r}
get_geoportal_url <- function(url) {
  dataset_identifier <- sub(".*/(.*)\\?.*", "\\1", url)
  paste0("https://www.ogd.stadt-zuerich.ch/wfs/geoportal/", dataset_identifier)
}
```

```{r}
# Helper function to get available layers from WFS
get_wfs_layers <- function(url) {
  
  url_geoportal <- get_geoportal_url(url)
  
  cat("Getting available layers from:", url_geoportal, "\n")
  
  # read xml from geoportal
  resp <- request(url_geoportal) |> 
    req_headers(service = "WFS", version = "1.1.0", request = "GetCapabilities") |> 
    req_perform()
  
  content_as_xml <- resp_body_xml(resp)
  
  # find available layers: find "Name" nodes with parent "Layer"
  name_nodes <- content_as_xml |> xml_ns_strip() |> xml_find_all("//Name")
  
  # keep all nodes that have Name and it's parent's name is "Layer"
  # and directly extract the name to get a list of typenames
  typename_nodes <- purrr::keep(name_nodes,
                                \(x) xml_name(xml_parent(x)) == "Layer")
  
  return(typename_nodes)
}

# Fetch available layers
layers <- get_wfs_layers(url)

# Set first layer as default
typename <- xml_text(layers[[1]])
cat("Chosen typename:", typename, "\n")
```

read the data
```{r}
read_geodata <- function(url, typename) {
  url_geoportal <- get_geoportal_url(url)
  
  request <- request(url_geoportal) |>
    req_url_query(
      service = "WFS",
      version = "1.1.0",
      outputFormat = "GeoJSON",
      request = "GetFeature",
      typename = typename
    )
  
  st_read(request$url)
}

df <- read_geodata(url, typename)
```

if the approach above does not work, try using [ows4r](https://eblondel.github.io/ows4R/); however, this needs to be installed first
```{r eval=FALSE}
# install.packages("ows4R")
library(ows4R)

# WFS-Client erstellen
url_geoportal <- get_geoportal_url(url)
wfs_client <- WFSClient$new(url_geoportal, "1.1.0")

# Verfügbare Feature-Typen anzeigen
wfs_client$getFeatureTypes(pretty = TRUE)

typenames <- wfs_client$getFeatureTypes(pretty = TRUE) |> 
  dplyr::pull(name)

df <- read_geodata(url, typenames[[1]])
```

# Analyze the data

look at the data
```{r}
head(df)
```

```{r}
glimpse(df)
```

```{r}
# look at distributions etc. without looking at geographical data (skim cannot deal with geometries)
skim(st_drop_geometry(df))
```

# Plot data

base R plot
```{r}
plot(df$geometry)
```

ggplot2 plot
```{r}
df |>
  ggplot() +
  geom_sf()
```

# Continue your code here...

```{r}

```

------------------------------------------------------------------------

# Contact

opendata@zuerich.ch
